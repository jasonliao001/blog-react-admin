{"version":3,"sources":["pages/useradmin/useradmin.module.css","pages/useradmin/view.js"],"names":["module","exports","ant-advanced-search-form","ant-form-item","ant-form-item-control-wrapper","formEnumState","label","placeholder","key","value","initialState","ModalForm","Form","create","name","onFieldsChange","props","changedFields","onChange","mapPropsToFields","username","createFormField","Object","_Users_milly_Github_blog_react_admin_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","phone","_useState","useState","modalformEnum","_Users_milly_Github_blog_react_admin_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_4__","className","antd__WEBPACK_IMPORTED_MODULE_6__","gutter","getFieldDecorator","form","children","i","push","antd__WEBPACK_IMPORTED_MODULE_3__","Item","concat","antd__WEBPACK_IMPORTED_MODULE_5__","getFields","SearchForm","columns","title","dataIndex","render","text","href","record","onClick","updateRow","bind","antd__WEBPACK_IMPORTED_MODULE_7__","type","deleteRow","_useReducer","useReducer","reducer","_useReducer2","tableData","dispatch","_useState3","visible","confirmLoading","cancelText","okText","_useState4","modalConfig","setModalConfig","_useState5","formEnum","_useState7","_useState8","fields","setFields","_useState9","_useState10","rowIndex","SetrowIndex","console","log","showModal","_ref","Modal","confirm","content","onOk","DeleteRowData","setTimeout","message","success","handleModalFormReset","Fragment","onSubmit","e","preventDefault","layout","span","offset","style","textAlign","antd__WEBPACK_IMPORTED_MODULE_10__","marginLeft","htmlType","resetFields","antd__WEBPACK_IMPORTED_MODULE_11__","marginTop","dataSource","bordered","antd__WEBPACK_IMPORTED_MODULE_8__","assign","UpdateRowData","AddRowData","onCancel","connect","state","useradmin","add","_useState11","_useState12","antd__WEBPACK_IMPORTED_MODULE_12__"],"mappings":"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","file":"static/js/1.5fe86c17.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ant-advanced-search-form\":\"useradmin_ant-advanced-search-form__1DksO\",\"ant-form-item\":\"useradmin_ant-form-item__EtGAd\",\"ant-form-item-control-wrapper\":\"useradmin_ant-form-item-control-wrapper__3WkIB\"};","import React, { useState, useReducer, useContext, createContext } from 'react';\nimport { Card, Form, Row, Col, Input, Button, Table, Divider, Modal, message } from 'antd';\nimport { connect } from 'react-redux';\nimport './useradmin.module.css';\nimport { AddRowData, DeleteRowData, UpdateRowData } from './actions';\nimport reducer from './reducer';\n// form config\nconst formEnumState = [\n  {\n    label: '用户名',\n    placeholder: '请输入用户名查询',\n    key: 'username',\n    value: ''\n  },\n  {\n    label: '手机号',\n    placeholder: '请输入手机号查询',\n    key: 'phone',\n    value: ''\n  }\n  // {\n  //   label: '邮箱',\n  //   placeholder: '请输入邮箱查询',\n  //   key: 'email',\n  //   value: ''\n  // }\n];\n\nconst initialState = [];\n\n// table config\n\n// ModalFrom\nconst ModalFormWrap = props => {\n  const [modalformEnum] = useState(formEnumState);\n  const getFields = () => {\n    const { getFieldDecorator } = props.form;\n    const children = [];\n    for (let i = 0; i < 2; i++) {\n      children.push(\n        <Col key={i}>\n          <Form.Item label={`${modalformEnum[i].label}`}>{getFieldDecorator(`${modalformEnum[i].key}`, {})(<Input placeholder={`${modalformEnum[i].placeholder}`} />)}</Form.Item>\n        </Col>\n      );\n    }\n    return children;\n  };\n  return (\n    <Form className=\"ant-advanced-search-form\">\n      <Row gutter={24}>{getFields()}</Row>\n    </Form>\n  );\n};\n\n// modal components\nconst ModalForm = Form.create({\n  name: 'modal-form',\n  onFieldsChange(props, changedFields) {\n    props.onChange(changedFields);\n  },\n\n  mapPropsToFields(props) {\n    return {\n      username: Form.createFormField({\n        ...props.username,\n        value: props.username.value\n      }),\n      phone: Form.createFormField({\n        ...props.phone,\n        value: props.phone.value\n      })\n    };\n  }\n})(ModalFormWrap);\n// form components\nconst SearchFormWrap = props => {\n  const columns = [\n    {\n      title: '用户名',\n      dataIndex: 'username',\n      key: 'username',\n      render: text => <a href=\"javascript:;\">{text}</a>\n    },\n    {\n      title: '手机号',\n      dataIndex: 'phone',\n      key: 'phone'\n    },\n    {\n      title: '邮箱',\n      dataIndex: 'email',\n      key: 'email'\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (text, record, i) => (\n        <span>\n          <a href=\"javascript:;\" onClick={updateRow.bind(this, text, record, i)}>\n            修改\n          </a>\n          <Divider type=\"vertical\" />\n          <a href=\"javascript:;\" onClick={deleteRow.bind(this, text, record, i)}>\n            删除\n          </a>\n        </span>\n      )\n    }\n  ];\n  const [tableData, dispatch] = useReducer(reducer, initialState);\n  const [modalConfig, setModalConfig] = useState({\n    title: '新建用户',\n    visible: false,\n    confirmLoading: false,\n    cancelText: '取消',\n    okText: '确定',\n    type: 0\n  });\n  const [formEnum] = useState(formEnumState);\n  const [fields, setFields] = useState({\n    username: {\n      value: ''\n    },\n    phone: {\n      value: ''\n    }\n  });\n  const [rowIndex, SetrowIndex] = useState(formEnumState);\n  const updateRow = (text, record, i) => {\n    console.log(tableData, 'tableData');\n\n    setFields(() => ({\n      username: {\n        value: tableData[i].username\n      },\n      phone: {\n        value: tableData[i].phone\n      }\n    }));\n    setModalConfig(() => ({ ...modalConfig, ...{ title: '编辑', type: 1 } }));\n    showModal();\n    SetrowIndex(({ rowIndex }) => (rowIndex = i));\n  };\n\n  const deleteRow = (text, record, i) => {\n    Modal.confirm({\n      title: '警告',\n      content: `您确定要删除${record.username}?`,\n      okText: '确认',\n      cancelText: '取消',\n      onOk: () => {\n        dispatch(DeleteRowData({ key: i }));\n        setTimeout(() => message.success('删除成功'), 300);\n      }\n    });\n  };\n  const handleFormChange = changedFields => {\n    setFields(fields => {\n      return { ...fields, ...changedFields };\n    });\n  };\n  const addModal = () => {\n    setModalConfig(() => ({ ...modalConfig, ...{ title: '新建用户', type: 0 } }));\n    showModal();\n  };\n  const showModal = () => {\n    setModalConfig(modalConfig => ({ ...modalConfig, ...{ visible: true } }));\n  };\n  const handleOk = () => {\n    setModalConfig(modalConfig => ({ ...modalConfig, ...{ confirmLoading: true } }));\n    setTimeout(() => {\n      setModalConfig(modalConfig => ({ ...modalConfig, ...{ visible: false, confirmLoading: false } }));\n      if (modalConfig.type) {\n        dispatch(UpdateRowData({ username: fields.username.value, phone: fields.phone.value, i: rowIndex }));\n      } else {\n        dispatch(AddRowData({ username: fields.username.value, phone: fields.phone.value }));\n      }\n\n      handleModalFormReset();\n      setFields(fields => ({\n        username: {\n          value: ''\n        },\n        phone: {\n          value: ''\n        }\n      }));\n    }, 2000);\n  };\n  const handleCancel = () => {\n    setModalConfig(modalConfig => ({ ...modalConfig, ...{ visible: false } }));\n  };\n\n  const handleSearch = e => {\n    e.preventDefault();\n  };\n  const handleReset = () => {\n    props.form.resetFields();\n  };\n  const handleModalFormReset = props => {\n    // props.form.resetFields();\n    console.log(this);\n  };\n  const getFields = () => {\n    const { getFieldDecorator } = props.form;\n    const children = [];\n    for (let i = 0; i < 2; i++) {\n      children.push(\n        <Col span={8} key={i}>\n          <Form.Item label={`${formEnum[i].label}`}>{getFieldDecorator(`${formEnum[i].key}`, {})(<Input placeholder={`${formEnum[i].placeholder}`} />)}</Form.Item>\n        </Col>\n      );\n    }\n    return children;\n  };\n\n  return (\n    <>\n      <Form className=\"ant-advanced-search-form\" onSubmit={handleSearch} layout=\"inline\">\n        <Row gutter={24}>\n          {getFields()}\n          <Col span={8} key={1} offset={16} style={{ textAlign: 'right' }}>\n            <Button type=\"primary\" onClick={addModal}>\n              新建\n            </Button>\n            <Button style={{ marginLeft: 8 }} type=\"primary\" htmlType=\"submit\">\n              查询\n            </Button>\n            <Button style={{ marginLeft: 8 }} onClick={handleReset}>\n              重置\n            </Button>\n          </Col>\n        </Row>\n      </Form>\n      <Table columns={columns} style={{ marginTop: '20px' }} dataSource={tableData} bordered />\n      <Modal onOk={handleOk} {...modalConfig} visible={modalConfig.visible} confirmLoading={modalConfig.confirmLoading} onCancel={handleCancel}>\n        <ModalForm {...fields} onChange={handleFormChange} />\n      </Modal>\n    </>\n  );\n};\nconst SearchForm = Form.create({\n  name: 'useradmin-search',\n  onFieldsChange(props, changedFields) {\n    props.onChange(changedFields);\n  },\n  mapPropsToFields(props) {\n    return {\n      username: Form.createFormField({\n        ...props.username,\n        value: props.username.value\n      }),\n      phone: Form.createFormField({\n        ...props.phone,\n        value: props.phone.value\n      })\n    };\n  }\n  // onValuesChange(_, values) {\n  //   console.log(values);\n  // }\n})(SearchFormWrap);\n//  user adminComponent\nconst useradminComponent = props => {\n  const [fields, setFields] = useState({\n    username: {\n      value: ''\n    },\n    phone: {\n      value: ''\n    }\n  });\n  const handleFormChange = changedFields => {\n    setFields(fields => {\n      return { ...fields, ...changedFields };\n    });\n  };\n\n  return (\n    <Card bordered={false}>\n      <SearchForm {...fields} onChange={handleFormChange} />\n      <p style={{ marginTop: '20px' }}>\n        表单数据双向绑定{fields.username.value}\n        {fields.phone.value}\n      </p>\n    </Card>\n  );\n};\nconst mapStateToProps = state => ({ tableData: state.useradmin });\nconst mapDispatchToProps = (dispatch, props) => ({\n  add: () => dispatch(AddRowData({ username: props.name })),\n  dispatch\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(useradminComponent);\n"],"sourceRoot":""}